

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>
<script>
  if (location.host === 'csorz.github.io') {
    location.href = 'https://cszy.top'
  }
</script>


<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="csorz">
  <meta name="keywords" content="">
  
    <meta name="description" content="常用docker配置及命令">
<meta property="og:type" content="article">
<meta property="og:title" content="常用docker配置及命令">
<meta property="og:url" content="http://example.com/20230802-%E5%B8%B8%E7%94%A8Docker%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%91%BD%E4%BB%A4/index.html">
<meta property="og:site_name" content="日有所思，日有所得">
<meta property="og:description" content="常用docker配置及命令">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bing.com/th?id=OHR.TunisiaAmphitheatre_ZH-CN4431856872_800x480.jpg">
<meta property="article:published_time" content="2023-10-17T04:10:10.000Z">
<meta property="article:modified_time" content="2024-02-28T09:42:21.949Z">
<meta property="article:author" content="csorz">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://bing.com/th?id=OHR.TunisiaAmphitheatre_ZH-CN4431856872_800x480.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>常用docker配置及命令 - 日有所思，日有所得</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>CSorz</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">

  <div class="mask full-video" style="z-index: 0; object-fit: cover;">
    <video style="width: 100%; height: 100%; object-fit: cover;" id="fullVideo" src="/mp4/StargazingSwitzerland_1920x1080_G_628102888_HD_ZH-CN.mp4" autoplay="autoplay" loop muted x5-video-player-type="h5" x5-video-player-fullscreen="true"></video>
  </div>
  <script type="text/javascript">
    try{
      var mp4List = [
        "ArcticFoxPups_FramepoolRM_372-581-588_1080_HD_ZH-CN.mp4",
        "DragonFly_ShutterstockRF_6899029_1080_HD_ZH-CN.mp4",
        "Elephants_Serengeti_NF_RF_RSO016_0424_1080_HD_ZH-CN.mp4",
        "LakePowell_Thunderstorms_nimiaRM_4471864_062_1080_HD_ZH-CN.mp4",
        "Navagio_Shipwreck_Beach_Zakynthos_nimia_4K_588263_1080_HD_ZH-CN.mp4",
        "SF_SutroBaths-4K_nimia_573584_1080_HD_ZH-CN.mp4",
        "StargazingSwitzerland_1920x1080_G_628102888_HD_ZH-CN.mp4",
        "Sunbeams_over_the_saronic_gulf_nimiaRM_4K_109609_1080_HD_ZH-CN.mp4",
        "SunwaptaFalls_1920x1080_G_1078430640_HD_ZH-CN.mp4",
        "ThaiWaterfall_1920x1080_G_679699496_HD_ZH-CN.mp4"
      ]
      var dom = document.getElementById('fullVideo')
      dom.src = "/mp4/" + mp4List[Math.floor(Math.random()*10)]
      setTimeout(function(){
        if(window.innerWidth > 750) {
          dom.play()
        }
      }, 1000)
    } catch(err) {

    }
  </script>

  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="常用docker配置及命令"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-17 12:10" pubdate>
          2023年10月17日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          43 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>

</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">常用docker配置及命令</h1>
            
            
              <div class="markdown-body">
                
                <p>常用docker配置及命令</p>
<span id="more"></span>

<h1 id="一、Docker-Compose简介"><a href="#一、Docker-Compose简介" class="headerlink" title="一、Docker-Compose简介"></a>一、Docker-Compose简介</h1><h2 id="1、Docker-Compose简介"><a href="#1、Docker-Compose简介" class="headerlink" title="1、Docker-Compose简介"></a>1、Docker-Compose简介</h2><p>Docker-Compose项目是Docker官方的开源项目，负责实现对Docker容器集群的快速编排。 Docker-Compose将所管理的容器分为三层，分别是工程（project），服务（service）以及容器（container）。Docker-Compose运行目录下的所有文件（docker-compose.yml，extends文件或环境变量文件等）组成一个工程，若无特殊指定工程名即为当前目录名。一个工程当中可包含多个服务，每个服务中定义了容器运行的镜像，参数，依赖。一个服务当中可包括多个容器实例，Docker-Compose并没有解决负载均衡的问题，因此需要借助其它工具实现服务发现及负载均衡。 Docker-Compose的工程配置文件默认为docker-compose.yml，可通过环境变量COMPOSE_FILE或-f参数自定义配置文件，其定义了多个有依赖关系的服务及每个服务运行的容器。 使用一个Dockerfile模板文件，可以让用户很方便的定义一个单独的应用容器。在工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况。例如要实现一个Web项目，除了Web服务容器本身，往往还需要再加上后端的数据库服务容器，甚至还包括负载均衡容器等。 Compose允许用户通过一个单独的docker-compose.yml模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。 Docker-Compose项目由Python编写，调用Docker服务提供的API来对容器进行管理。因此，只要所操作的平台支持Docker API，就可以在其上利用Compose来进行编排管理。</p>
<h2 id="2、Docker-Compose安装"><a href="#2、Docker-Compose安装" class="headerlink" title="2、Docker-Compose安装"></a>2、Docker-Compose安装</h2><p>安装方法一： 下载Docker-Compose：<br>bash复制代码sudo curl -L <a target="_blank" rel="noopener" href="https://github.com/docker/compose/releases/download/1.23.0-rc3/docker-compose-%60uname">https://github.com/docker/compose/releases/download/1.23.0-rc3/docker-compose-`uname</a> -s<code>-</code>uname -m&#96; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</p>
<p>安装Docker-Compose： sudo chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose 查看版本 : docker-compose version 安装方法二： 安装pip<br>bash复制代码yum -y install epel-release<br>yum -y install python-pip</p>
<p>确认版本 pip –version 更新pip pip install –upgrade pip 安装docker-compose pip install docker-compose 查看版本 docker-compose version 安装补全工具： 为了方便输入命令，也可以安装Docker的补全提示工具帮忙快速输入命令： 安装 yum install bash-completion 下载docker-compose脚本<br>bash复制代码curl -L <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/docker/compose/$">https://raw.githubusercontent.com/docker/compose/$</a>(docker-compose version –short)&#x2F;contrib&#x2F;completion&#x2F;bash&#x2F;docker-compose &gt; &#x2F;etc&#x2F;bash_completion.d&#x2F;docker-compose</p>
<h2 id="3、Docker-Compose卸载"><a href="#3、Docker-Compose卸载" class="headerlink" title="3、Docker-Compose卸载"></a>3、Docker-Compose卸载</h2><p>如果是二进制包方式安装的，删除二进制文件即可： sudo rm &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose 如果通过Python pip工具安装的，则执行如下命令删除： sudo pip uninstall docker-compose</p>
<h1 id="二、Docker-Compose常用命令"><a href="#二、Docker-Compose常用命令" class="headerlink" title="二、Docker-Compose常用命令"></a>二、Docker-Compose常用命令</h1><h2 id="1、Docker-Compose命令格式"><a href="#1、Docker-Compose命令格式" class="headerlink" title="1、Docker-Compose命令格式"></a>1、Docker-Compose命令格式</h2><p>bash复制代码docker-compose [-f <arg>…] [options] [COMMAND] [ARGS…]</p>
<p>命令选项如下： -f，–file FILE指定Compose模板文件，默认为docker-compose.yml，可以多次指定。 -p，–project-name NAME指定项目名称，默认将使用所在目录名称作为项目名。 -x-network-driver 使用Docker的可拔插网络后端特性（需要Docker 1.9+版本） -x-network-driver DRIVER指定网络后端的驱动，默认为bridge（需要Docker 1.9+版本） -verbose输出更多调试信息 -v，–version打印版本并退出</p>
<h2 id="2、docker-compose-up-这个命令一定要记住，每次启动都要用到，只要学会使用的人记住这个就好了"><a href="#2、docker-compose-up-这个命令一定要记住，每次启动都要用到，只要学会使用的人记住这个就好了" class="headerlink" title="2、docker-compose up 这个命令一定要记住，每次启动都要用到，只要学会使用的人记住这个就好了"></a>2、docker-compose up 这个命令一定要记住，每次启动都要用到，只要学会使用的人记住这个就好了</h2><p>bash复制代码docker-compose up [options] [–scale SERVICE&#x3D;NUM…] [SERVICE…]</p>
<p>选项包括： -d 在后台运行服务容器 –no-color 不使用颜色来区分不同的服务的控制输出 –no-deps 不启动服务所链接的容器 –force-recreate 强制重新创建容器，不能与–no-recreate同时使用 –no-recreate 如果容器已经存在，则不重新创建，不能与–force-recreate同时使用 –no-build 不自动构建缺失的服务镜像 –build 在启动容器前构建服务镜像 –abort-on-container-exit 停止所有容器，如果任何一个容器被停止，不能与-d同时使用 -t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒） –remove-orphans 删除服务中没有在compose文件中定义的容器 –scale SERVICE&#x3D;NUM 设置服务运行容器的个数，将覆盖在compose中通过scale指定的参数 docker-compose up 启动所有服务 docker-compose up -d 在后台所有启动服务 -f 指定使用的Compose模板文件，默认为docker-compose.yml，可以多次指定。 docker-compose -f docker-compose.yml up -d</p>
<h2 id="3、docker-compose-ps"><a href="#3、docker-compose-ps" class="headerlink" title="3、docker-compose ps"></a>3、docker-compose ps</h2><p>docker-compose ps [options] [SERVICE…] docker-compose ps 列出项目中目前的所有容器</p>
<h2 id="4、docker-compose-stop"><a href="#4、docker-compose-stop" class="headerlink" title="4、docker-compose stop"></a>4、docker-compose stop</h2><p>docker-compose stop [options] [SERVICE…] 选项包括： -t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒） docker-compose stop 停止正在运行的容器，可以通过docker-compose start 再次启动</p>
<h2 id="5、docker-compose-h"><a href="#5、docker-compose-h" class="headerlink" title="5、docker-compose -h"></a>5、docker-compose -h</h2><p>docker-compose -h 查看帮助</p>
<h2 id="6、docker-compose-down"><a href="#6、docker-compose-down" class="headerlink" title="6、docker-compose down"></a>6、docker-compose down</h2><p>docker-compose down [options] 停止和删除容器、网络、卷、镜像。 选项包括： –rmi type，删除镜像，类型必须是：all，删除compose文件中定义的所有镜像；local，删除镜像名为空的镜像 -v, –volumes，删除已经在compose文件中定义的和匿名的附在容器上的数据卷 –remove-orphans，删除服务中没有在compose中定义的容器 docker-compose down 停用移除所有容器以及网络相关</p>
<h2 id="7、docker-compose-logs"><a href="#7、docker-compose-logs" class="headerlink" title="7、docker-compose logs"></a>7、docker-compose logs</h2><p>docker-compose logs [options] [SERVICE…] 查看服务容器的输出。默认情况下，docker-compose将对不同的服务输出使用不同的颜色来区分。可以通过–no-color来关闭颜色。 docker-compose logs 查看服务容器的输出</p>
<h2 id="8、docker-compose-build"><a href="#8、docker-compose-build" class="headerlink" title="8、docker-compose build"></a>8、docker-compose build</h2><p>docker-compose build [options] [–build-arg key&#x3D;val…] [SERVICE…] 构建（重新构建）项目中的服务容器。 选项包括： –compress 通过gzip压缩构建上下环境 –force-rm 删除构建过程中的临时容器 –no-cache 构建镜像过程中不使用缓存 –pull 始终尝试通过拉取操作来获取更新版本的镜像 -m, –memory MEM为构建的容器设置内存大小 –build-arg key&#x3D;val为服务设置build-time变量 服务容器一旦构建后，将会带上一个标记名。可以随时在项目目录下运行docker-compose build来重新构建服务</p>
<h2 id="9、docker-compose-pull"><a href="#9、docker-compose-pull" class="headerlink" title="9、docker-compose pull"></a>9、docker-compose pull</h2><p>docker-compose pull [options] [SERVICE…] 拉取服务依赖的镜像。 选项包括： –ignore-pull-failures，忽略拉取镜像过程中的错误 –parallel，多个镜像同时拉取 –quiet，拉取镜像过程中不打印进度信息 docker-compose pull 拉取服务依赖的镜像</p>
<h2 id="10、docker-compose-restart"><a href="#10、docker-compose-restart" class="headerlink" title="10、docker-compose restart"></a>10、docker-compose restart</h2><p>docker-compose restart [options] [SERVICE…] 重启项目中的服务。 选项包括： -t, –timeout TIMEOUT，指定重启前停止容器的超时（默认为10秒） docker-compose restart 重启项目中的服务</p>
<h2 id="11、docker-compose-rm"><a href="#11、docker-compose-rm" class="headerlink" title="11、docker-compose rm"></a>11、docker-compose rm</h2><p>docker-compose rm [options] [SERVICE…] 删除所有（停止状态的）服务容器。 选项包括： –f, –force，强制直接删除，包括非停止状态的容器 -v，删除容器所挂载的数据卷 docker-compose rm 删除所有（停止状态的）服务容器。推荐先执行docker-compose stop命令来停止容器。</p>
<h2 id="12、docker-compose-start"><a href="#12、docker-compose-start" class="headerlink" title="12、docker-compose start"></a>12、docker-compose start</h2><p>docker-compose start [SERVICE…] docker-compose start 启动已经存在的服务容器。</p>
<h2 id="13、docker-compose-run"><a href="#13、docker-compose-run" class="headerlink" title="13、docker-compose run"></a>13、docker-compose run</h2><p>docker-compose run [options] [-v VOLUME…] [-p PORT…] [-e KEY&#x3D;VAL…] SERVICE [COMMAND] [ARGS…] 在指定服务上执行一个命令。 docker-compose run ubuntu ping <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 在指定容器上执行一个ping命令。</p>
<h2 id="14、docker-compose-scale"><a href="#14、docker-compose-scale" class="headerlink" title="14、docker-compose scale"></a>14、docker-compose scale</h2><p>docker-compose scale web&#x3D;3 db&#x3D;2 设置指定服务运行的容器个数。通过service&#x3D;num的参数来设置数量</p>
<h2 id="15、docker-compose-pause"><a href="#15、docker-compose-pause" class="headerlink" title="15、docker-compose pause"></a>15、docker-compose pause</h2><p>docker-compose pause [SERVICE…] 暂停一个服务容器</p>
<h2 id="16、docker-compose-kill"><a href="#16、docker-compose-kill" class="headerlink" title="16、docker-compose kill"></a>16、docker-compose kill</h2><p>docker-compose kill [options] [SERVICE…] 通过发送SIGKILL信号来强制停止服务容器。  支持通过-s参数来指定发送的信号，例如通过如下指令发送SIGINT信号： docker-compose kill -s SIGINT</p>
<h2 id="17、dokcer-compose-config"><a href="#17、dokcer-compose-config" class="headerlink" title="17、dokcer-compose config"></a>17、dokcer-compose config</h2><p>docker-compose config [options] 验证并查看compose文件配置。 选项包括： –resolve-image-digests 将镜像标签标记为摘要 -q, –quiet 只验证配置，不输出。 当配置正确时，不输出任何内容，当文件配置错误，输出错误信息 –services 打印服务名，一行一个 –volumes 打印数据卷名，一行一个</p>
<h2 id="18、docker-compose-create"><a href="#18、docker-compose-create" class="headerlink" title="18、docker-compose create"></a>18、docker-compose create</h2><p>docker-compose create [options] [SERVICE…] 为服务创建容器。 选项包括： –force-recreate：重新创建容器，即使配置和镜像没有改变，不兼容–no-recreate参数 –no-recreate：如果容器已经存在，不需要重新创建，不兼容–force-recreate参数 –no-build：不创建镜像，即使缺失 –build：创建容器前，生成镜像</p>
<h2 id="19、docker-compose-exec"><a href="#19、docker-compose-exec" class="headerlink" title="19、docker-compose exec"></a>19、docker-compose exec</h2><p>docker-compose exec [options] SERVICE COMMAND [ARGS…] 选项包括： -d 分离模式，后台运行命令。 –privileged 获取特权。 –user USER 指定运行的用户。 -T 禁用分配TTY，默认docker-compose exec分配TTY。 –index&#x3D;index，当一个服务拥有多个容器时，可通过该参数登陆到该服务下的任何服务，例如：docker-compose exec –index&#x3D;1 web &#x2F;bin&#x2F;bash ，web服务中包含多个容器</p>
<h2 id="20、docker-compose-port"><a href="#20、docker-compose-port" class="headerlink" title="20、docker-compose port"></a>20、docker-compose port</h2><p>docker-compose port [options] SERVICE PRIVATE_PORT 显示某个容器端口所映射的公共端口。 选项包括： –protocol&#x3D;proto，指定端口协议，TCP（默认值）或者UDP –index&#x3D;index，如果同意服务存在多个容器，指定命令对象容器的序号（默认为1）</p>
<h2 id="21、docker-compose-push"><a href="#21、docker-compose-push" class="headerlink" title="21、docker-compose push"></a>21、docker-compose push</h2><p>docker-compose push [options] [SERVICE…] 推送服务依的镜像。 选项包括： –ignore-push-failures 忽略推送镜像过程中的错误</p>
<h2 id="22、docker-compose-stop"><a href="#22、docker-compose-stop" class="headerlink" title="22、docker-compose stop"></a>22、docker-compose stop</h2><p>docker-compose stop [options] [SERVICE…] 显示各个容器运行的进程情况。</p>
<h2 id="23、docker-compose-unpause"><a href="#23、docker-compose-unpause" class="headerlink" title="23、docker-compose unpause"></a>23、docker-compose unpause</h2><p>docker-compose unpause [SERVICE…] 恢复处于暂停状态中的服务。</p>
<h2 id="24、docker-compose-version"><a href="#24、docker-compose-version" class="headerlink" title="24、docker-compose version"></a>24、docker-compose version</h2><p>docker-compose version 打印版本信息。</p>
<h1 id="三、Docker-Compose模板文件"><a href="#三、Docker-Compose模板文件" class="headerlink" title="三、Docker-Compose模板文件"></a>三、Docker-Compose模板文件</h1><h2 id="1、Docker-Compose模板文件简介"><a href="#1、Docker-Compose模板文件简介" class="headerlink" title="1、Docker-Compose模板文件简介"></a>1、Docker-Compose模板文件简介</h2><p>Compose允许用户通过一个docker-compose.yml模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。 Compose模板文件是一个定义服务、网络和卷的YAML文件。Compose模板文件默认路径是当前目录下的docker-compose.yml，可以使用.yml或.yaml作为文件扩展名。 Docker-Compose标准模板文件应该包含version、services、networks 三大部分，最关键的是services和networks两个部分。<br>yaml复制代码version: ‘2’<br>services:<br>  web:<br>    image: dockercloud&#x2F;hello-world<br>    ports:<br>      - 8080<br>    networks:<br>      - front-tier<br>      - back-tier</p>
<p>  redis:<br>    image: redis<br>    links:<br>      - web<br>    networks:<br>      - back-tier</p>
<p>  lb:<br>    image: dockercloud&#x2F;haproxy<br>    ports:<br>      - 80:80<br>    links:<br>      - web<br>    networks:<br>      - front-tier<br>      - back-tier<br>    volumes:<br>      - &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock </p>
<p>networks:<br>  front-tier:<br>    driver: bridge<br>  back-tier:<br>    driver: bridge</p>
<p>Compose目前有三个版本分别为Version 1，Version 2，Version 3，Compose区分Version 1和Version 2（Compose 1.6.0+，Docker Engine 1.10.0+）。Version 2支持更多的指令。Version 1将来会被弃用。</p>
<h2 id="2、image"><a href="#2、image" class="headerlink" title="2、image"></a>2、image</h2><p>image是指定服务的镜像名称或镜像ID。如果镜像在本地不存在，Compose将会尝试拉取镜像。<br>yaml复制代码services:<br>    web:<br>        image: hello-world</p>
<h2 id="3、build"><a href="#3、build" class="headerlink" title="3、build"></a>3、build</h2><p>服务除了可以基于指定的镜像，还可以基于一份Dockerfile，在使用up启动时执行构建任务，构建标签是build，可以指定Dockerfile所在文件夹的路径。Compose将会利用Dockerfile自动构建镜像，然后使用镜像启动服务容器。 build: &#x2F;path&#x2F;to&#x2F;build&#x2F;dir 也可以是相对路径，只要上下文确定就可以读取到Dockerfile。 build: .&#x2F;dir 设定上下文根目录，然后以该目录为准指定Dockerfile。<br>yaml复制代码build:<br>  context: ..&#x2F;<br>  dockerfile: path&#x2F;of&#x2F;Dockerfile</p>
<p>build都是一个目录，如果要指定Dockerfile文件需要在build标签的子级标签中使用dockerfile标签指定。 如果同时指定image和build两个标签，那么Compose会构建镜像并且把镜像命名为image值指定的名字。</p>
<h2 id="4、context"><a href="#4、context" class="headerlink" title="4、context"></a>4、context</h2><p>context选项可以是Dockerfile的文件路径，也可以是到链接到git仓库的url，当提供的值是相对路径时，被解析为相对于撰写文件的路径，此目录也是发送到Docker守护进程的context<br>yaml复制代码build:<br>  context: .&#x2F;dir</p>
<h2 id="5、dockerfile"><a href="#5、dockerfile" class="headerlink" title="5、dockerfile"></a>5、dockerfile</h2><p>使用dockerfile文件来构建，必须指定构建路径<br>yaml复制代码build:<br>  context: .<br>  dockerfile: Dockerfile-alternate</p>
<p>dockerfile指令不能跟image同时使用，否则Compose将不确定根据哪个指令来生成最终的服务镜像。</p>
<h2 id="6、command"><a href="#6、command" class="headerlink" title="6、command"></a>6、command</h2><p>使用command可以覆盖容器启动后默认执行的命令。 command: bundle exec thin -p 3000</p>
<h2 id="7、container-name"><a href="#7、container-name" class="headerlink" title="7、container_name"></a>7、container_name</h2><p>Compose的容器名称格式是：&lt;项目名称&gt;&lt;服务名称&gt;&lt;序号&gt; 可以自定义项目名称、服务名称，但如果想完全控制容器的命名，可以使用标签指定： container_name: app</p>
<h2 id="8、depends-on"><a href="#8、depends-on" class="headerlink" title="8、depends_on"></a>8、depends_on</h2><p>在使用Compose时，最大的好处就是少打启动命令，但一般项目容器启动的顺序是有要求的，如果直接从上到下启动容器，必然会因为容器依赖问题而启动失败。例如在没启动数据库容器的时候启动应用容器，应用容器会因为找不到数据库而退出。depends_on标签用于解决容器的依赖、启动先后的问题。<br>yaml复制代码version: ‘2’<br>services:<br>  web:<br>    build: .<br>    depends_on:<br>      - db<br>      - redis<br>  redis:<br>    image: redis<br>  db:<br>    image: postgres</p>
<p>上述YAML文件定义的容器会先启动redis和db两个服务，最后才启动web 服务。</p>
<h2 id="9、pid"><a href="#9、pid" class="headerlink" title="9、pid"></a>9、pid</h2><p>pid: “host” 将PID模式设置为主机PID模式，跟主机系统共享进程命名空间。容器使用pid标签将能够访问和操纵其他容器和宿主机的名称空间。</p>
<h2 id="10、ports"><a href="#10、ports" class="headerlink" title="10、ports"></a>10、ports</h2><p>ports用于映射端口的标签。 使用HOST:CONTAINER格式或者只是指定容器的端口，宿主机会随机映射端口。<br>yaml复制代码ports:</p>
<ul>
<li>“3000”</li>
<li>“8000:8000”</li>
<li>“49100:22”</li>
<li>“127.0.0.1:8001:8001”</li>
</ul>
<p>当使用HOST:CONTAINER格式来映射端口时，如果使用的容器端口小于60可能会得到错误得结果，因为YAML将会解析xx:yy这种数字格式为60进制。所以建议采用字符串格式。</p>
<h2 id="11、extra-hosts"><a href="#11、extra-hosts" class="headerlink" title="11、extra_hosts"></a>11、extra_hosts</h2><p>添加主机名的标签，会在&#x2F;etc&#x2F;hosts文件中添加一些记录。<br>yaml复制代码extra_hosts:</p>
<ul>
<li>“somehost:162.242.195.82”</li>
<li>“otherhost:50.31.209.229”</li>
</ul>
<p>启动后查看容器内部hosts：<br>yaml复制代码162.242.195.82  somehost<br>50.31.209.229   otherhost</p>
<h2 id="12、volumes"><a href="#12、volumes" class="headerlink" title="12、volumes"></a>12、volumes</h2><p>挂载一个目录或者一个已存在的数据卷容器，可以直接使用 [HOST:CONTAINER]格式，或者使用[HOST:CONTAINER:ro]格式，后者对于容器来说，数据卷是只读的，可以有效保护宿主机的文件系统。 Compose的数据卷指定路径可以是相对路径，使用 . 或者 .. 来指定相对目录。 数据卷的格式可以是下面多种形式：<br>yaml复制代码volumes:<br>  &#x2F;&#x2F; 只是指定一个路径，Docker 会自动在创建一个数据卷（这个路径是容器内部的）。</p>
<ul>
<li>&#x2F;var&#x2F;lib&#x2F;mysql<br>  &#x2F;&#x2F; 使用绝对路径挂载数据卷</li>
<li>&#x2F;opt&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql<br>  &#x2F;&#x2F; 以 Compose 配置文件为中心的相对路径作为数据卷挂载到容器。</li>
<li>.&#x2F;cache:&#x2F;tmp&#x2F;cache<br>  &#x2F;&#x2F; 使用用户的相对路径（~&#x2F; 表示的目录是 &#x2F;home&#x2F;&lt;用户目录&gt;&#x2F; 或者 &#x2F;root&#x2F;）。</li>
<li>~&#x2F;configs:&#x2F;etc&#x2F;configs&#x2F;:ro<br>  &#x2F;&#x2F; 已经存在的命名的数据卷。</li>
<li>datavolume:&#x2F;var&#x2F;lib&#x2F;mysql</li>
</ul>
<p>如果不使用宿主机的路径，可以指定一个volume_driver。 volume_driver: mydriver</p>
<h2 id="13、volumes-from"><a href="#13、volumes-from" class="headerlink" title="13、volumes_from"></a>13、volumes_from</h2><p>从另一个服务或容器挂载其数据卷：<br>yaml复制代码volumes_from:</p>
<ul>
<li>service_name    <ul>
<li>container_name</li>
</ul>
</li>
</ul>
<h2 id="14、dns"><a href="#14、dns" class="headerlink" title="14、dns"></a>14、dns</h2><p>自定义DNS服务器。可以是一个值，也可以是一个列表。<br>yaml复制代码dns：8.8.8.8<br>dns：<br>    - 8.8.8.8<br>      - 9.9.9.9</p>
<h2 id="15、dns-search"><a href="#15、dns-search" class="headerlink" title="15、dns_search"></a>15、dns_search</h2><p>配置DNS搜索域。可以是一个值，也可以是一个列表。<br>yaml复制代码dns_search：example.com<br>dns_search：<br>    - domain1.example.com<br>    - domain2.example.com</p>
<h2 id="16、entrypoint"><a href="#16、entrypoint" class="headerlink" title="16、entrypoint"></a>16、entrypoint</h2><p>在Dockerfile中有一个指令叫做ENTRYPOINT指令，用于指定接入点。 在docker-compose.yml中可以定义接入点，覆盖Dockerfile中的定义： entrypoint: &#x2F;code&#x2F;entrypoint.sh</p>
<h2 id="17、env-file"><a href="#17、env-file" class="headerlink" title="17、env_file"></a>17、env_file</h2><p>在docker-compose.yml中可以定义一个专门存放变量的文件。 如果通过docker-compose -f FILE指定配置文件，则env_file中路径会使用配置文件路径。 如果有变量名称与environment指令冲突，则以后者为准。格式如下： env_file: .env 或者根据docker-compose.yml设置多个：<br>yaml复制代码env_file:</p>
<ul>
<li>.&#x2F;common.env</li>
<li>.&#x2F;apps&#x2F;web.env</li>
<li>&#x2F;opt&#x2F;secrets.env</li>
</ul>
<p>如果在配置文件中有build操作，变量并不会进入构建过程中。</p>
<h2 id="18、cap-add"><a href="#18、cap-add" class="headerlink" title="18、cap_add"></a>18、cap_add</h2><p>增加指定容器的内核能力（capacity）。 让容器具有所有能力可以指定：<br>yaml复制代码cap_add:<br>    - ALL</p>
<h2 id="19、cap-drop"><a href="#19、cap-drop" class="headerlink" title="19、cap_drop"></a>19、cap_drop</h2><p>去掉指定容器的内核能力（capacity）。 去掉NET_ADMIN能力可以指定：<br>yaml复制代码cap_drop:<br>    - NET_ADMIN</p>
<h2 id="20、cgroup-parent"><a href="#20、cgroup-parent" class="headerlink" title="20、cgroup_parent"></a>20、cgroup_parent</h2><p>创建了一个cgroup组名称为cgroups_1: cgroup_parent: cgroups_1</p>
<h2 id="21、devices"><a href="#21、devices" class="headerlink" title="21、devices"></a>21、devices</h2><p>指定设备映射关系，例如：<br>yaml复制代码devices:<br>    - “&#x2F;dev&#x2F;ttyUSB1:&#x2F;dev&#x2F;ttyUSB0”</p>
<h2 id="22、expose"><a href="#22、expose" class="headerlink" title="22、expose"></a>22、expose</h2><p>暴露端口，但不映射到宿主机，只允许能被连接的服务访问。仅可以指定内部端口为参数，如下所示：<br>yaml复制代码expose:<br>    - “3000”<br>    - “8000”</p>
<h2 id="23、extends"><a href="#23、extends" class="headerlink" title="23、extends"></a>23、extends</h2><p>基于其它模板文件进行扩展。例如，对于webapp服务定义了一个基础模板文件为common.yml：<br>yaml复制代码# common.yml<br>webapp:<br>    build: .&#x2F;webapp<br>    environment:<br>        - DEBUG&#x3D;false<br>        - SEND_EMAILS&#x3D;false</p>
<p>再编写一个新的development.yml文件，使用common.yml中的webapp服务进行扩展：<br>yaml复制代码# development.yml<br>web:<br>    extends:<br>        file: common.yml<br>        service: webapp<br>    ports:<br>        - “8000:8000”<br>    links:<br>        - db<br>    environment:<br>        - DEBUG&#x3D;true<br>db:<br>    image: mysql</p>
<p>后者会自动继承common.yml中的webapp服务及环境变量定义。 extends限制如下： A、要避免出现循环依赖 B、extends不会继承links和volumes_from中定义的容器和数据卷资源 推荐在基础模板中只定义一些可以共享的镜像和环境变量，在扩展模板中具体指定应用变量、链接、数据卷等信息</p>
<h2 id="24、external-links"><a href="#24、external-links" class="headerlink" title="24、external_links"></a>24、external_links</h2><p>链接到docker-compose.yml外部的容器，可以是非Compose管理的外部容器。<br>yaml复制代码external_links:<br>    - redis_1<br>    - project_db_1:mysql<br>    - project_db_1:postgresql</p>
<h2 id="25、labels"><a href="#25、labels" class="headerlink" title="25、labels"></a>25、labels</h2><p>为容器添加Docker元数据（metadata）信息。例如，可以为容器添加辅助说明信息：<br>yaml复制代码labels：<br>    com.startupteam.description: “webapp for a strtup team”</p>
<h2 id="26、links"><a href="#26、links" class="headerlink" title="26、links"></a>26、links</h2><p>链接到其它服务中的容器。使用服务名称（同时作为别名），或者“服务名称:服务别名”（如 SERVICE:ALIAS），例如：<br>yaml复制代码links:<br>    - db<br>    - db:database<br>    - redis</p>
<p>使用别名将会自动在服务容器中的&#x2F;etc&#x2F;hosts里创建。例如：<br>yaml复制代码172.17.2.186  db<br>172.17.2.186  database<br>172.17.2.187  redis</p>
<h2 id="27、log-driver"><a href="#27、log-driver" class="headerlink" title="27、log_driver"></a>27、log_driver</h2><p>指定日志驱动类型。目前支持三种日志驱动类型：<br>yaml复制代码log_driver: “json-file”<br>log_driver: “syslog”<br>log_driver: “none”</p>
<h2 id="28、log-opt"><a href="#28、log-opt" class="headerlink" title="28、log_opt"></a>28、log_opt</h2><p>日志驱动的相关参数。例如：<br>yaml复制代码log_driver: “syslog”log_opt:<br>    syslog-address: “tcp:&#x2F;&#x2F;192.168.0.42:123”</p>
<h2 id="29、net"><a href="#29、net" class="headerlink" title="29、net"></a>29、net</h2><p>设置网络模式。<br>yaml复制代码net: “bridge”<br>net: “none”<br>net: “host”</p>
<h2 id="30、security-opt"><a href="#30、security-opt" class="headerlink" title="30、security_opt"></a>30、security_opt</h2><p>指定容器模板标签（label）机制的默认属性（用户、角色、类型、级别等）。例如，配置标签的用户名和角色名：<br>yaml复制代码security_opt:<br>    - label:user:USER<br>    - label:role:ROLE</p>
<h2 id="31、环境变量"><a href="#31、环境变量" class="headerlink" title="31、环境变量"></a>31、环境变量</h2><p>环境变量可以用来配置Docker-Compose的行为。 COMPOSE_PROJECT_NAME 设置通过Compose启动的每一个容器前添加的项目名称，默认是当前工作目录的名字。 COMPOSE_FILE 设置docker-compose.yml模板文件的路径。默认路径是当前工作目录。 DOCKER_HOST 设置Docker daemon的地址。默认使用unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock。 DOCKER_TLS_VERIFY 如果设置不为空，则与Docker daemon交互通过TLS进行。 DOCKER_CERT_PATH 配置TLS通信所需要的验证(ca.pem、cert.pem 和 key.pem)文件的路径，默认是 ~&#x2F;.docker 。</p>
<h1 id="四、Docker-Compose模板文件示例"><a href="#四、Docker-Compose模板文件示例" class="headerlink" title="四、Docker-Compose模板文件示例"></a>四、Docker-Compose模板文件示例</h1><h2 id="1、docker-compose模板文件编写"><a href="#1、docker-compose模板文件编写" class="headerlink" title="1、docker-compose模板文件编写"></a>1、docker-compose模板文件编写</h2><p>docker-compose.yaml文件如下：<br>yaml复制代码version: ‘2’<br>services:<br>  web1:<br>    image: nginx<br>    ports:<br>      - “6061:80”<br>    container_name: “web1”<br>    networks:<br>      - dev<br>  web2:<br>    image: nginx<br>    ports:<br>      - “6062:80”<br>    container_name: “web2”<br>    networks:<br>      - dev<br>      - pro<br>  web3:<br>    image: nginx<br>    ports:<br>      - “6063:80”<br>    container_name: “web3”<br>    networks:<br>      - pro</p>
<p>networks:<br>  dev:<br>    driver: bridge<br>  pro:<br>    driver: bridge</p>
<p>#volumes:</p>
<p>docker-compose.yaml文件指定了三个web服务。</p>
<h2 id="2、启动应用"><a href="#2、启动应用" class="headerlink" title="2、启动应用"></a>2、启动应用</h2><p>创建一个webapp目录，将docker-compose.yaml文件拷贝到webapp目录下，使用docker-compose启动应用。 docker-compose up -d</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a><br>windows 和 macOS 安装后自带 docker-compose</p>
<h2 id="配置镜像"><a href="#配置镜像" class="headerlink" title="配置镜像"></a>配置镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>  <span class="hljs-string">&quot;https://registry.cn-hangzhou.aliyuncs.com&quot;</span>,<br>  <span class="hljs-string">&quot;http://hub-mirror.c.163.com&quot;</span><br>]<br></code></pre></td></tr></table></figure>

<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><ol>
<li>启动docker</li>
<li>根目录打开命令窗口</li>
<li>运行<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker-compose up -d</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="windows自启动"><a href="#windows自启动" class="headerlink" title="windows自启动"></a>windows自启动</h2><p>解决报错：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">Docker: Service <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> running. Windows will ask you <span class="hljs-keyword">for</span> elevated <span class="hljs-keyword">access</span><br></code></pre></td></tr></table></figure>
<p>需要管理会话的原因是默认配置中的 Docker 客户端使用命名管道连接到 Docker 引擎，并且该命名管道只能由管理员访问。</p>
<p>若要避免这种情况，可以简单地允许用户“完全控制”访问该命名管道。</p>
<p>你可以在这里找到一个Powershell模块来修复它。</p>
<p><a target="_blank" rel="noopener" href="https://www.powershellgallery.com/packages/dockeraccesshelper/0.0.3">https://www.powershellgallery.com/packages/dockeraccesshelper/0.0.3</a></p>
<p>有关如何使用该模块的说明，请参见此处。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/tfenster/dockeraccesshelper">https://github.com/tfenster/dockeraccesshelper</a></p>
<h2 id="自动启动容器服务"><a href="#自动启动容器服务" class="headerlink" title="自动启动容器服务"></a>自动启动容器服务</h2><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">services:</span><br><span class="hljs-symbol">  photoprism:</span><br><span class="hljs-symbol">    restart:</span> always<br></code></pre></td></tr></table></figure>
<p>no	Don’t automatically restart the container. (Default)</p>
<p>on-failure[:max-retries]	Restart the container if it exits due to an error, which manifests as a non-zero exit code. Optionally, limit the number of times the Docker daemon attempts to restart the container using the :max-retries option. The on-failure policy only prompts a restart if the container exits with a failure. It doesn’t restart the container if the daemon restarts.</p>
<p>always	Always restart the container if it stops. If it’s manually stopped, it’s restarted only when Docker daemon restarts or the container itself is manually restarted. (See the second bullet listed in restart policy details)</p>
<p>unless-stopped	Similar to always, except that when the container is stopped (manually or otherwise), it isn’t restarted even after Docker daemon restarts.</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/">https://docs.docker.com/desktop/</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7051057669896929288">https://juejin.cn/post/7051057669896929288</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/config/containers/start-containers-automatically/">https://docs.docker.com/config/containers/start-containers-automatically/</a></p>
<p><a target="_blank" rel="noopener" href="https://superuser.com/questions/1657661/docker-service-is-not-running-windows-will-ask-you-for-elevated-access">https://superuser.com/questions/1657661/docker-service-is-not-running-windows-will-ask-you-for-elevated-access</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tfenster/dockeraccesshelper">https://github.com/tfenster/dockeraccesshelper</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>常用docker配置及命令</div>
      <div>http://example.com/20230802-常用Docker配置及命令/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>csorz</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年10月17日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/20231018-Node.js%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/" title="Node.js执行shell命令">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Node.js执行shell命令</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/20231016-Cocos%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" title="Cocos学习资料">
                        <span class="hidden-mobile">Cocos学习资料</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      鄂ICP备2024039931号
    </a>
  </span>
  
    
      <span class="beian-police">
        
          <span style="visibility: hidden; width: 0">|</span>
          <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
        
        <span class="beian-police">公安备案号（正在备案中...）</span>
      </span>
    
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
